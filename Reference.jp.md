# GeoFrameとは
`GeoFrame`とは`glfw`と`glad`を利用したオープンソースの`OpenGL`ハンドラです。ウィンドウの作成や操作、シェーダを用いたバッファの描画、オフスクリーンレンダリング、フォントを用いたテキストの表示などの基本的な操作を行うことができます。また、独自のジョブシステムを用いたマルチスレッド実行もサポートしています。

-----

# 目次
- [型エイリアス一覧](#型エイリアス一覧)
- [例外一覧](#例外一覧)
- [Buffer関連のクラス](#buffer関連のクラス)
- [Event関連のクラス](#event関連のクラス)
- [Font関連のクラス](#font関連のクラス)
- [Job関連のクラス](#job関連のクラス)
- [Screen関連のクラス(WIP)](#screen関連のクラス)
- [Shader関連のクラス](#shader関連のクラス)
- [Window関連のクラス](#window関連のクラス)

-----

# 型エイリアス一覧

## `基本型`の型エイリアス
- `ID = unsigned`
- `Index = unsigned long long`
- `EventID = unsigned long long`

## `std`の型エイリアス
- `Map = std::unordered_map`
- `Pair = std::pair`
- `Set = std::unordered_set`
- `Shared = std::shared_ptr`
- `Queue = std::queue`
- `UniqueLock = std::unique_lock`
- `LockGuard = std::lock_guard`
- `Atomic = std::atomic`
- `Vec = std::vector`
- `Function = std::function`
- `Mutex = std::mutex`
- `Thread = std::thread`
- `CondVar = std::condition_variable`
- `Str = std::string`
- `WStr = std::wstring`

## `GeoMath`の型エイリアス
- `vec2T = GeoMath::vec2`
- `vec3T = GeoMath::vec3`
- `vec4T = GeoMath::vec4`
- `mat2T = GeoMath::mat2`
- `mat2x3T = GeoMath::mat2x3`
- `mat2x4T = GeoMath::mat2x4`
- `mat3x2T = GeoMath::mat3x2`
- `mat3T = GeoMath::mat3`
- `mat3x4T = GeoMath::mat3x4`
- `mat4x2T = GeoMath::mat4x2`
- `mat4x3T = GeoMath::mat4x3`
- `mat4T = GeoMath::mat4`
- `QuaternionT = GeoMath::Quaternion`
- `vec2 = vec2T`
- `vec3 = vec3T`
- `vec4 = vec4T`
- `mat2 = mat2T`
- `mat2x3 = mat2x3T`
- `mat2x4 = mat2x4T`
- `mat3x2 = mat3x2T`
- `mat3 = mat3T`
- `mat3x4 = mat3x4T`
- `mat4x2 = mat4x2T`
- `mat4x3 = mat4x3T`
- `mat4 = mat4T`
- `Quaternion = QuaternionT`

-----

# 例外一覧
## APIError
このエラーは`OpenGL`のAPIライブラリである`glad`もしくは`glfw`が実行に失敗した場合に発生します。また、このエラーは`glad`、`glfw`もしくは`freetype`の初期化が失敗した場合にも発生します。

## KernelError
このエラーは`GeoFrame`内部のクラスが何らかの理由で正常な動作を行えなかった場合に発生します。その原因は様々であるため、エラーメッセージを参照してください。

## InterfaceError
このエラーは`GeoFrame`のオブジェクトに対して不正な引数を渡した場合や、不正な操作を行った場合に発生します。

-----

# Buffer関連のクラス
## Attributeクラス
このクラスは`OpenGL`の頂点属性に対する各設定値を保持します。各設定値の詳細は[頂点属性](#頂点属性)を参照してください。\
主なメンバ関数は以下の通りです。
- Attribute(Ulong const &index, Ulong const &comps, Ulong const &stride, Ulong const &offset);\

## Bufferクラス
このクラスは`OpenGL`のバッファオブジェクトを制御します。バッファの`GPU`メモリへの送信及びバッファ内容の更新はこのクラスのメンバ関数を利用して行ってください。\
主なメンバ関数は以下の通りです。

## 頂点属性
`OpenGL`のバッファはバッファ内のデータの切り分け方を指定するために頂点属性を一つ以上設定する必要があります。すべての頂点属性は`float`型に設定されます。他の型を利用する場合はシェーダー内で別の型に明示的に変換する処理を記述してください。頂点属性には四つの設定値があり、それぞれ以下の通りです。
- `Index` : 頂点属性のインデックスです。この頂点属性が先頭から何番目かを示す値で、頂点座標のインデックスは`0`から始まる整数値です。頂点座標のインデックスは`Attribute`クラスのコンストラクタの第一引数に渡すことで設定できます。`GenerateAttributes()`関数を利用した場合は自動生成されるため指定する必要はありません。
- `Components` : 頂点属性を構成する要素数です。頂点属性の要素数は`Attribute`クラスのコンストラクタの第二引数に渡すことで設定できます。
- `Stride(WIP)` : 頂点属性のストライドです。ストライドは頂点属性の要素間のバイト数を示す値で、`0`以上の整数値です。ストライドは`Attribute`クラスのコンストラクタの第三引数に渡すことで設定できます。`GenerateAttributes()`関数で省略した場合は、`Components`の要素から自動生成されます。 *//TODO:例を示す*
- `Offset` : 頂点属性のオフセットです。オフセットは頂点属性の先頭からのバイト数を示す値で、`0`以上の整数値です。オフセットは`Attribute`クラスのコンストラクタの第四引数に渡すことで設定できます。`GenerateAttributes()`関数で省略した場合は、`Components`の要素から自動生成されます。

-----

# Event関連のクラス
## EventSystemクラス
このクラスはイベントの登録、管理及びコールバックの呼び出しを行います。このクラスの関数は全てスレッドセーフであり、複数スレッドから安全にアクセスできます。また、このクラスはトリガ関数の管理も行います。トリガ関数はコールバック関数型とは異なり、特定のイベントが最初に発生した一回のみ呼び出されます。イベントのフォーマット及びコールバック関数、トリガ関数のフォーマットの詳細は[イベントのフォーマット](#イベントのフォーマット)を参照してください。\
主なメンバ関数は以下の通りです。

## イベントのフォーマット
イベントは`EventSystem`クラスの`PostEvent`関数を利用して発行します。
イベントとして発行できる型は`Str`型のみで、イベントのフォーマットは特に決まっていませんが以下のフォーマットを推奨します。
- `****:****:****:**** ...`
- `****/****/****/**** ...`

※ `****`の部分に任意の文字列を入力

イベントのコールバック関数は`EventSystem`クラスの`RegisterCallback`関数を利用して登録します。コールバック関数は以下のフォーマットである必要があります。
- `Function<void(Str const &event)>`\
※ `event`には発行されたイベントが格納されます

また、イベントのトリガ関数は`EventSystem`クラスの`RegisterTrigger`関数を利用して登録します。トリガ関数はコールバックと同様のフォーマットである必要があります。

-----

# Font関連のクラス
## Character構造体
この構造体はフォントの文字情報を保持します。この構造体のメンバは全て`public`ですが、書き換えた場合の動作は保証されないため書き換えは行わないことをおすすめします。\
主なメンバは以下の通りです。

## Fontクラス
このクラスは外部からフォントファイルを読み込み、文字情報を管理します。フォントの制御はこのクラスのメンバ関数を利用して行ってください。\
主なメンバ関数は以下の通りです。

-----

# Job関連のクラス
## IJobクラス
このクラスは`JobSystem`にジョブとして登録するための基底クラスです。このクラスを継承して`Execute`メソッドを実装することでジョブを作成してください。`JobSystem`はこのクラスを継承したクラスのインスタンスをジョブとして扱います。また、ジョブ同士の依存関係を設定したい場合は依存関係を設定したいジョブのインスタンスをコンストラクタに渡してください。コンストラクタ以外から依存関係を定義することはできません。\
主なメンバ関数は以下の通りです。

-----

## SimpleJobクラス
このクラスは`IJob`クラスを継承したジョブクラスです。このクラスは渡された関数オブジェクトをジョブとして実行します。このクラスのインスタンスを作成する際には関数オブジェクトを渡してください。実行可能な関数のフォーマットは[Job対応関数フォーマット](#job対応関数フォーマット)を参照してください。\
主なメンバ関数は以下の通りです。

## JobSystemクラス
このクラスはマルチスレッド実行をサポートするためのクラスです。このクラスの関数は全てスレッドセーフであり、複数スレッドから安全にアクセスできます。特定の関数のマルチスレッド実行を行いたい場合はこのクラスを利用してください。また、関数をデーモン化したい場合もこのクラスを利用してください。\
主なメンバ関数は以下の通りです。

## Job対応関数フォーマット
`SimpleJob`クラスで実行可能な関数のフォーマットは以下の通りです。
- `Function<void()>`\
このフォーマットの関数は引数及び戻り値を持つことができないため、引数または戻り値を持つ関数を実行したい場合はラムダ式を利用してください。

-----

# Screen関連のクラス
## Screenクラス
このクラスは`OpenGL`のフレームバッファを管理します。フレームバッファの作成及び描画はこのクラスのメンバ関数を利用して行ってください。オフスクリーンレンダリング、ポストエフェクト、マルチスクリーンなどの機能の他に、デプスバッファの作成機能もサポートしています。スクリーンのレンダリング結果はメンバ関数を用いて取得することができます。また、デプスバッファ及びステンシルバッファは使用できません。代わりにカラーバッファにデプス及びステンシルのデータを保存してください。\
*現在複数のテクスチャバッファを持つスクリーンの描画は動作しません。(代わりに単一のテクスチャバッファを持つスクリーンを複数使用してください。)*\
主なメンバ関数は以下の通りです。

## CubeScreenクラス //未実装
*このクラスは実装予定であり、現在は未実装のため利用できません。*\
~~このクラスは`OpenGL`のキューブマップを管理します。キューブマップの作成及び描画はこのクラスのメンバ関数を利用して行ってください。スクリーンと同様にオフスクリーンレンダリング、ポストエフェクト、マルチスクリーンなどの機能をサポートしています。また、デプスバッファの作成機能もサポートしています。~~\
~~主なメンバ関数は以下の通りです。~~

-----

# Shader関連のクラス
## Shaderクラス
このクラスはGLSL言語で記述されたプログラムを読み込み、シェーダとして管理します。また、深度バッファやステンシルバッファといったOpenGLの機能の有効、無効の管理、シェーダに対する変数の送信を行います。\
主なメンバ関数は以下の通りです。

-----

# Window関連のクラス
## Iconクラス
このクラスはウィンドウのアイコンを管理します。アイコンの画像の読み込みはこのクラスのメンバ関数を利用して行ってください。\
主なメンバ関数は以下の通りです。

## Cursorクラス
このクラスはカーソルを管理します。独自の外観を持つカーソルの作成及び描画はこのクラスのメンバ関数を利用して行ってください。\
主なメンバ関数は以下の通りです。

## StandardCursorクラス
このクラスは標準のカーソルを管理します。標準のカーソルの作成及び描画はこのクラスのメンバ関数を利用して行ってください。標準のカーソルの種類は以下の通りです。次に示す定数はすべて`CursorShape`列挙体のメンバです。
- `ARROW` : 矢印カーソル
- `IBEAM` : Iビームカーソル
- `CROSSHAIR` : 十字カーソル
- `HAND` : 手カーソル
- `HRESIZE` : 水平リサイズカーソル
- `VRESIZE` : 垂直リサイズカーソル

主なメンバ関数は以下の通りです。

## WindowSettings構造体
この構造体はウィンドウの設定を保持します。この構造体のメンバは全て`public`であり、この構造体のメンバを書き換えた上で`Window`クラスに渡すことでウィンドウの設定を変更できます。
それぞれのメンバの詳細は以下の通りです。
- `resizable` : 画面のサイズが変更可能かを設定します。デフォルトは`GLFW_TRUE`です。
- `visible` : 画面の表示/非表示を設定します。デフォルトは`GLFW_TRUE`です。
- `decorated` : 画面上部のボタン等を付けるかどうかを設定します。デフォルトは`GLFW_TRUE`です。
- `focused` : 画面が非最大化されて生成されたときに入力フォーカスが与えられるかどうかを設定します。デフォルトは`GLFW_TRUE`です。
- `autoIconify` : 画面が入力フォーカスを失ったときに全画面化が自動的に解除され、アイコン化されるかを設定します。デフォルトは`GLFW_TRUE`です。
- `floating` : 画面が常に最前面に表示されるかを設定します。デフォルトは`GLFW_FALSE`です。
- `maximized` : 画面が生成時に最大化されるかを設定します。デフォルトは`GLFW_FALSE`です。
- `centerCursor` : 全画面生成時にカーソルを中央に配置するかを設定します。デフォルトは`GLFW_TRUE`です。
- `transparentFramebuffer` : 画面のフレームバッファが透明かどうかを設定します。デフォルトは`GLFW_FALSE`です。
- `focusOnShow` : `Window::Show()`が呼び出されたときに画面に入力フォーカスをあてるかを設定します。デフォルトは`GLFW_TRUE`です。
- `scaleToMonitor` : 画面のコンテンツ領域を、それが配置されているモニターのコンテンツスケールに基づいてサイズ変更するかどうかを設定します。デフォルトは`GLFW_FALSE`です。

## WindowControllerクラス
このクラスはウィンドウの各種コールバック関数及び毎フレームの処理を行う関数を管理します。ウィンドウのコールバック関数及び毎フレームの処理はこのクラスを継承し実装することで行ってください。`OnFrame()`関数は必ずオーバーライドしてください。他のコールバックはデフォルトでは何も行いません。\
オーバーライド可能なコールバック関数は以下の通りです。

## Windowクラス
このクラスはウィンドウを管理します。ウィンドウの作成及び描画はこのクラスのメンバ関数を利用して行ってください。また、ウィンドウの設定は`WindowSettings`構造体を利用して行ってください。ウィンドウに対する操作等もこのクラスのメンバ関数を利用して行ってください。\
主なメンバ関数は以下の通りです。
